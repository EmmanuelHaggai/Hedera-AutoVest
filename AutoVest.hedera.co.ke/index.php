<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoVest</title>
    <title>Hedera AutoVest | Automated Investing on WhatsApp</title>
    <meta name="description" content="Invest in top company stocks automatically through Hedera AutoVest. Buy, track, and grow your investments directly from WhatsApp - powered by Hedera Hashgraph for speed, security, and transparency.">

    <link rel="icon" href="inc/assets/images/favicon.png" sizes="32x32">

    <!-- stylesheets - start -->
    <link rel="stylesheet" href="inc/assets/dist/style.css">
    <!-- stylesheets - end -->

    <!-- Swiper-link -->
    <link rel="stylesheet" href="inc/assets/dist/swiper-bundle.min.css">

    <!-- Load Animate.css from CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

</head>

<body onload="particles()">

    <!-- Header-start -->
    <header class="header sticky-nav">
        <div class="container">
            <div class="header-wrapper">
                <div class="header-logo-wrapper">
                    <div class="hamburger direction-right">
                        <div class="hamburger-wrapper">
                            <div class="hamburger-icon">
                                <div class="bars">
                                    <div class="bar"></div>
                                    <div class="bar"></div>
                                    <div class="bar"></div>
                                </div>
                            </div>
                            <div class="hamburger-content">
                                <div class="hamburger-content-header">

                                    <div class="hamburger-close">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                            <title>window-close</title>
                                            <path
                                                d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z" />
                                        </svg>
                                    </div>
                                </div>
                                <div class="hamburger-content-inner">
                                    <div class="hamburger-image">
                                        <img src="inc/assets/images/publication-img-2.png" alt="Hamburger image"
                                            class="image">
                                    </div>

                                    <h2 class="heading-title">
                                        Your money. Your plan. Automated.
                                    </h2>
                                    <p>
                                        With Hedera AutoVest, anyone can invest in top companies using M-Pesa or crypto without complex apps or paperwork.
                                        Your transactions are fast, secure, and transparently verified on Hedera Hashgraph.
                                    </p>
                                        
                                </div>
                               
                            </div>
                            <div class="hamburger-overlay"></div>
                        </div>
                    </div>
                    <a href="" class="logo">
                        <img class="hide-sticky lightmode-logo" src="inc/assets/images/logo.png" alt="AutoVest logo">
                        <img class="hide-sticky darkmode-logo" src="inc/assets/images-dark/logo.png" alt="Logo">
                        <img class="show-sticky" src="inc/assets/images/logo.png" alt="AutoVest logo">
                    </a>
                </div>

                <div class="nav-btn-block">
                    <div>
                        <input type="checkbox" class="checkbox" id="checkbox">
                        <label for="checkbox" class="checkbox-label">
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                <path
                                    d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z" />
                            </svg>
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path
                                    d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z" />
                            </svg>
                            <span class="ball"></span>
                        </label>
                    </div>
                    <a href="https://wa.me/18167908575?text=Hi+I+want+to+start+investing" target="_blank" rel="noopener noreferrer" class="btn primary">Start on WhatsApp</a>
                </div>
            </div>
        </div>
        <div class="header-menu-wrapper">
            <div class="container">
                <div class="header-wrapper">
                    <div class="header-inner-wrapper">
                        <div class="navigation-menu-wrapper menu-b538310 desktop-wrapper">

                            <ul id="menu-main-menu" class="navigation-menu desktop">
                                <li class="menu-item">
                                    <a href="">Home</a>
                                </li>

                                <li class="menu-item">
                                    <a href="https://wa.me/18167908575?text=Hi+I+want+to+start+investing" target="_blank" rel="noopener noreferrer"> Start on WhatsApp </a>

                                </li>

                                <li class="menu-item">
                                    <a href="https://youtube.com/watch?v=YOUR_VIDEO_ID" target="_blank">Watch Demo</a>
                                </li>
                            </ul>
                        </div>

                        <div class="hamburger direction-left">
                            <div class="hamburger-wrapper">
                                <div class="hamburger-icon">
                                    <div class="bars">
                                        <div class="bar"></div>
                                        <div class="bar"></div>
                                        <div class="bar"></div>
                                    </div>
                                </div>
                                <div class="hamburger-content">
                                    <div class="hamburger-content-header">
                                        <a href="" class="logo">
                                            <img class="lightmode-logo" src="inc/assets/images/logo.png"
                                                alt="AutoVest logo">
                                            <img class="darkmode-logo" src="inc/assets/images-dark/logo.png"
                                                alt="Logo">
                                        </a>
                                        <div class="hamburger-close">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                <title>window-close</title>
                                                <path
                                                    d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z" />
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="navigation-menu-wrapper">
                                        <ul class="navigation-menu mobile">

                                            <li class="menu-item">
                                                <a href="">Home</a>
                                            </li>

                                            <li class="menu-item">
                                                <a href="https://wa.me/18167908575?text=Hi+I+want+to+start+investing" target="_blank" rel="noopener noreferrer">Start on WhatsApp</a>
                                            </li>

                                            <li class="menu-item">
                                                <a href="https://youtube.com/watch?v=YOUR_VIDEO_ID" target="_blank">Watch Demo</a>
                                            </li>
                                        </ul>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                </div>
            </div>
        </div>


    </header>
    <!-- Header-end -->

    <section class="hero-6-section">
        <!-- Particles Background -->

        <div class="container">
            
            <div class="hero-text-wrapper wow animate__animated custom-fadeInUp" data-wow-delay="0.5s">
                <div class="headings">
                    <h2 class="primary-heading">
                        Invest Smarter. Grow Automatically.
                    </h2>
                    <p>
                        Buy and auto-invest in top company stocks directly from WhatsApp or the web.
                        Fast, transparent, and verified on Hedera Hashgraph.
                    </p>
                </div>

                <div class="btn-block">
                    <a href="https://youtube.com/watch?v=YOUR_VIDEO_ID" class="btn primary" target="_blank">
                        Watch Demo
                    </a>
                    <a href="https://wa.me/18167908575?text=Hi+I+want+to+start+investing" target="_blank" rel="noopener noreferrer" class="btn primary">
                        Start on WhatsApp
                    </a>
                </div>
            </div>

        </div>
        <div class="particles-wrapper"></div>

        <canvas id="particles"></canvas>


    </section>


    <section class="services-offer-section padding-bottom">
        <div class="container">
            <div class="heading wow animate__animated custom-fadeInUp">
                <h6 class="sub-heading">What We Offer</h6>
                <h2 class="primary-heading">
                    Smarter Investing Solutions<br>
                    <span class="underline"></span>
                </h2>
            </div>
            <div class="services-card-wrapper grid-3-col">


                <a href="https://wa.me/18167908575?text=Hi+I+want+to+start+investing" target="_blank" rel="noopener noreferrer" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.1s">
                    <div class="head">
                        <h3 class="title">Invest Through WhatsApp</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="34" height="37">
                                <path d="M380.9 97.1C339 55.2 283.2 32 224.6 32 106 32 8 129.9 8 248.6c0 43.9 11.6 86.6 
                                33.7 124.1L0 480l110.9-40.7c35.3 19.4 74.9 29.6 115.8 29.6h.1c118.6 0 216.6-97.9 
                                216.6-216.6 0-58.6-23.2-114.4-62.5-155.2zM224.7 438c-36.5 0-72.2-9.8-103.3-28.3l-7.4-4.4
                                -65.6 24 22.4-67.5-4.8-7.8c-21.1-34.3-32.2-74-32.2-114.8 0-118.1 96.1-214.3 
                                214.3-214.3 57.3 0 111.1 22.3 151.5 62.7s62.7 94.2 62.7 151.5c0 118.2-96.2 
                                214.3-214.6 214.3z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        Start investing directly from WhatsApp. Chat, verify your account, set your investment plan, 
                        and receive instant confirmations - all these without leaving your favorite app.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>available only on</p>
                        <h6>WhatsApp</h6>
                    </div>
                </a>

                <a href="#" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.2s">
                    <div class="head">
                        <h3 class="title">Auto-Invest Plans</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="34" height="37">
                                <path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 
                                256-114.6 256-256S397.4 0 256 0zm0 472c-119.4 0-216-96.6-216-216S136.6 40 
                                256 40s216 96.6 216 216-96.6 216-216 216zm-8-312v120h104
                                c8.8 0 16 7.2 16 16s-7.2 16-16 16H232c-8.8 0-16-7.2-16-16V160
                                c0-8.8 7.2-16 16-16s16 7.2 16 16z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        Schedule your investments automatically. Choose how much to invest weekly or monthly, 
                        and let the system handle execution and Hedera-verified tracking.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>starting from</p>
                        <h6>KSh 500 per plan</h6>
                    </div>
                </a>


                <a href="#" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.3s">
                    <div class="head">
                        <h3 class="title">Instant Stock Purchase</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="34" height="37">
                                <path d="M256 8C119 8 8 119 8 256s111 248 248 248 
                                248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 
                                56 256 56s200 89.5 200 200-89.5 200-200 200zm-24-280v96h96
                                c13.3 0 24 10.7 24 24s-10.7 24-24 24H232c-13.3 0-24-10.7-24-24v-120
                                c0-13.3 10.7-24 24-24s24 10.7 24 24z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        Buy top U.S. and Kenyan stocks instantly through your linked wallet or M-Pesa balance. 
                        Confirm your order and receive a Hedera-verified transaction record in seconds.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>execution time</p>
                        <h6>under 5 seconds</h6>
                    </div>
                </a>

                <a href="#" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.4s">
                    <div class="head">
                        <h3 class="title">Portfolio Tracking & Reports</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="34" height="37">
                                <path d="M32 32h448v448H32zM96 416h64V288H96zm128 0h64V192h-64zm128 0h64V96h-64z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        View your holdings, profit, and performance in both USD and KES. 
                        Download detailed, blockchain-verified investment reports anytime.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>included with</p>
                        <h6>every account</h6>
                    </div>
                </a>


                <a href="#" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.5s">
                    <div class="head">
                        <h3 class="title">Blockchain Verification</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="34" height="37">
                                <path d="M437.5 74.5L256 0 74.5 74.5 0 256l74.5 181.5L256 512l181.5-74.5L512 256zM256 464l-152-62.5L48 
                                256l56-145.5L256 48l152 62.5L464 256l-56 145.5z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        Every investment action - from deposits to purchases - is recorded on the Hedera Hashgraph network, 
                        giving you transparent, tamper-proof proof of ownership and transaction history.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>verified on</p>
                        <h6>Hedera Network</h6>
                    </div>
                </a>


                <a href="#" class="main-services-card wow animate__animated custom-fadeInUp" data-wow-delay="0.6s">
                    <div class="head">
                        <h3 class="title">M-Pesa Integration</h3>
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="34" height="37">
                                <path d="M256 8C119 8 8 119 8 256s111 248 248 248 
                                248-111 248-248S393 8 256 8zm96 264h-72v72c0 13.3-10.7 24-24 
                                24s-24-10.7-24-24v-72h-72c-13.3 0-24-10.7-24-24s10.7-24 
                                24-24h72v-72c0-13.3 10.7-24 24-24s24 10.7 24 24v72h72
                                c13.3 0 24 10.7 24 24s-10.7 24-24 24z"/>
                            </svg>
                        </div>
                    </div>

                    <p>
                        Deposit or withdraw funds instantly through M-Pesa. 
                        Your balance updates automatically and is reflected across both WhatsApp and on the Hedera Network.
                    </p>

                    <div class="line"></div>
                    <div class="bottom-text-block">
                        <p>powered by</p>
                        <h6>M-Pesa & Hedera</h6>
                    </div>
                </a>









                
            </div>

        </div>
    </section>



    <section class="statistics-section" style="display: block;">
        <div class="container">
            <div class="heading wow animate__ custom-fadeInUp animated" style="visibility: visible; animation-name: customFadeInUp;">
                <h6 class="sub-heading">(Auto-Updating Every 10 Minutes) </h6> <br>
                <h2 class="primary-heading">NSE Equities Real-Time Market Watch
                    <span class="underline"></span>
                </h2>
            </div>
            <div>
                <div id="nse-status" style="font:14px/1.4 system-ui,Segoe UI,Roboto,Arial;display: none;"></div>
                <div id="nse-table" style="font-family: inherit;
            font-size: var(--btn-font-size);
            font-weight: 500;
            line-height: 2.0;" class="title"></div>
            </div>
        </div>
    </section>


   
    <section class="client-feedback-section feedback-swiper-section">
        <div class="container">
            <div class="heading wow animate__animated custom-fadeInUp">
                <h6 class="sub-heading">What they say</h6>
                <h2 class="primary-heading">Client Feedback<br>
                    <span class="underline"></span>
                </h2>
            </div>
            <!-- Feedback Swiper -->
            <div class="swiper feedback-swiper wow animate__animated custom-fadeInUp">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="feedback-block wow animate__animated custom-fadeInUp" data-wow-delay="0.1s">
                        <h3 class="feedback-text">
                            “Hedera AutoVest isn’t just a product we built for others.. it’s something my friends and I actually use. 
                            We love how simple it is to invest, track returns, and stay consistent without worrying about timing or complexity.”
                        </h3>
                        <div class="line"></div>
                        <div class="image">
                            <img src="inc/assets/images/customer-img.png" alt="Founder Image">
                            <p class="name">
                                <span>Emmanuel Haggai, </span>Founder & Lead Developer
                            </p>
                        </div>
                    </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="feedback-block wow animate__animated custom-fadeInUp" data-wow-delay="0.2s">
                            <h3 class="feedback-text">
                                “I’ve been part of the early testing, and it already feels like something special. 
                                Being able to invest straight from WhatsApp is simple and surprisingly smooth. 
                                It’s exciting to see this launching and to know we’re using something built here.”
                            </h3>
                            <div class="line"></div>
                            <div class="image">
                                <img src="inc/assets/images/customer-img-2.png" alt="Jeremy - Early Tester">
                                <p class="name">
                                    <span>Jeremy, </span>Friend & Early Tester
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="feedback-block wow animate__animated custom-fadeInUp" data-wow-delay="0.3s">
                            <h3 class="feedback-text">
                                “As a doctor, my schedule is always packed, so I love how easy this is to use. 
                                I can set up my investment plan once and let it run automatically. 
                                It’s practical, transparent, and saves me time every month.”
                            </h3>
                            <div class="line"></div>
                            <div class="image">
                                <img src="inc/assets/images/customer-img-3.png" alt="Hein - MVO Local Doctor">
                                <p class="name">
                                    <span>Dr. Hein (MVO), </span>Early User & Supporter
                                </p>
                            </div>
                        </div>

                    </div>
                   

                </div>

                <div class="swiper-feedback-pagination"></div>
            </div>
        </div>
    </section>



<script>
(() => {
  // --- Config ---
  const ENDPOINT = "https://whatsapp.hedera.co.ke/get_nse_snapshot.php?key=readljiou09jlij099pjpojuiiuohiojkhoy89uhiljhp9j";
  const POLL_MS  = 600_000; // 10 minutes

  const $status = document.getElementById("nse-status");
  const $table  = document.getElementById("nse-table"); // will hold stocks + announcements

  let lastHash = null;
  let backoff  = POLL_MS;

  // --- Utils ---
  const hashString = s => {
    let h = 5381; for (let i=0;i<s.length;i++) h = ((h << 5) + h) ^ s.charCodeAt(i);
    return (h >>> 0).toString(16);
  };
  const fmtNum = (v, dp=2) => (v === null || v === undefined || isNaN(v)) ? "" : Number(v).toFixed(dp);
  const fmtInt = v => (v === null || v === undefined || isNaN(v)) ? "" : String(Math.round(v));
  const fmtPct = v => (v === null || v === undefined || isNaN(v)) ? "" : (Number(v) * 100).toFixed(2) + "%";
  const abbrKM = v => {
    if (v === null || v === undefined || isNaN(v)) return "";
    const n = Number(v);
    if (Math.abs(n) >= 1e6) return (n / 1e6).toFixed(2) + "M";
    if (Math.abs(n) >= 1e3) return (n / 1e3).toFixed(2) + "K";
    return String(Math.round(n));
  };

  // Map old rows -> new tick shape for compatibility
  function normalizePayload(raw) {
    // New shape
    if (raw && (Array.isArray(raw.ticks) || Array.isArray(raw.announcements))) {
      return {
        snapshot_dt: raw.snapshot_dt || "",
        market_status: raw.market_status || "",
        market_note: raw.market_note || "",
        ticks: Array.isArray(raw.ticks) ? raw.ticks : [],
        announcements: Array.isArray(raw.announcements) ? raw.announcements : []
      };
    }
    // Old shape { rows: [...] } where fields were strings
    const rows = Array.isArray(raw?.rows) ? raw.rows : [];
    const ticks = rows.map(r => ({
      ticker: r.name,
      time_str: r.time,
      prev_close: toNum(r.prevClosing),
      latest: toNum(r.closing ?? r.latest),
      change_abs: toNum(r.change),
      change_pct: null, // wasn’t provided in old feed
      high: toNum(r.high),
      low: toNum(r.low),
      volume: toNum(r.volume),
      vwap: toNum(r.vwap),
      deals: toNum(r.deals),
      turnover: toNum(r.turnover),
      foreign_pct: pctToFloat(r.foreign),
      status: r.status || "traded"
    }));
    return {
      snapshot_dt: raw?.snapshot_dt || "",
      market_status: raw?.market_status || "",
      market_note: raw?.market_note || "",
      ticks,
      announcements: []
    };
  }

  function toNum(s) {
    if (s === null || s === undefined) return null;
    const t = String(s).replace(/,/g, "").trim();
    if (t === "" || t === "-" || t === "—") return null;
    const m = t.match(/^(-?\d+(?:\.\d+)?)([KkMm])?$/);
    if (!m) return isFinite(+t) ? +t : null;
    const v = parseFloat(m[1]), suf = (m[2]||"").toLowerCase();
    if (suf === "k") return v * 1e3;
    if (suf === "m") return v * 1e6;
    return v;
  }
  function pctToFloat(s) {
    if (s === null || s === undefined) return null;
    const t = String(s).replace(/\s/g, "");
    const m = t.match(/-?\d+(?:\.\d+)?%/);
    return m ? parseFloat(m[0]) / 100 : null;
  }

  // --- Rendering ---
  function render(payloadRaw) {
    const p = normalizePayload(payloadRaw);

    // Header status text
    const tickCount = p.ticks.length;
    const annsCount = p.announcements.length;
    const traded    = p.ticks.filter(t => t.status === "traded" && t.latest != null).length;
    const noTrades  = tickCount - traded;

    $status.textContent =
      `Snapshot: ${p.snapshot_dt || "n/a"} • Market: ${p.market_status || "unknown"} ` +
      `${p.market_note ? `• Note: ${p.market_note} ` : ""}• Tickers: ${tickCount} ` +
      `• Traded: ${traded} • No trades: ${noTrades} • Announcements: ${annsCount}`;

    // Build Stocks table
    const stockHeaders = [
      ["ticker","Ticker"],
      ["time_str","Time"],
      ["prev_close","Prev"],
      ["latest","Latest"],
      ["change_abs","Δ Px"],
      ["change_pct","Δ %"],
      ["high","High"],
      ["low","Low"],
      ["volume","Volume"],
      ["vwap","VWAP"],
      ["deals","Deals"],
      ["turnover","Turnover"],
      ["foreign_pct","Foreign"],
      ["status","Status"]
    ];

    const stockRowsHtml = p.ticks.map(r => {
      const cells = [
        r.ticker || "",
        r.time_str || "",
        fmtNum(r.prev_close),
        fmtNum(r.latest),
        fmtNum(r.change_abs),
        fmtPct(r.change_pct),
        fmtNum(r.high),
        fmtNum(r.low),
        abbrKM(r.volume),
        fmtNum(r.vwap),
        fmtInt(r.deals),
        abbrKM(r.turnover),
        fmtPct(r.foreign_pct),
        r.status || ""
      ].map(v => `<td style="border-bottom:1px solid #f1f1f1;padding:6px;white-space:nowrap">${v}</td>`).join("");
      return `<tr>${cells}</tr>`;
    }).join("");

    // Build Announcements table
    const annsHeaders = ["Time","Type","Message"];
    const annsRowsHtml = p.announcements.map(a => {
      const t = a.time || a.time_str || "";
      const type = a.type || "exchange";
      const msg = a.message || "";
      return `<tr>
        <td style="border-bottom:1px solid #f1f1f1;padding:6px;white-space:nowrap">${t}</td>
        <td style="border-bottom:1px solid #f1f1f1;padding:6px;white-space:nowrap">${type}</td>
        <td style="border-bottom:1px solid #f1f1f1;padding:6px">${msg}</td>
      </tr>`;
    }).join("");

    // Two stacked tables
    let html = "";
    html += "<div style='margin-bottom:12px'>";
    html += "<table style='border-collapse:collapse;width:100%'><thead><tr>";
    stockHeaders.forEach(([key,label]) =>
      html += `<th style="text-align:left;border-bottom:1px solid #ddd;padding:6px">${label}</th>`
    );
    html += "</tr></thead><tbody>";
    html += stockRowsHtml || `<tr><td colspan="${stockHeaders.length}" style="padding:8px;color:#666">No tick data.</td></tr>`;
    html += "</tbody></table>";
    html += "</div>";

    html += "<div><br>";
    html += "<div style='font-weight:600;margin:10px 0 6px'>Exchange Announcements</div>";
    html += "<table style='border-collapse:collapse;width:100%'><thead><tr>";
    annsHeaders.forEach(h =>
      html += `<th style="text-align:left;border-bottom:1px solid #ddd;padding:6px">${h}</th>`
    );
    html += "</tr></thead><tbody>";
    html += annsRowsHtml || `<tr><td colspan="3" style="padding:8px;color:#666">None.</td></tr>`;
    html += "</tbody></table>";
    html += "</div>";

    $table.innerHTML = html;
  }

  // --- Networking with backoff + de-dupe ---
  async function fetchLatest() {
    const ctrl = new AbortController();
    const t = setTimeout(() => ctrl.abort(), 10_000);

    try {
      const res = await fetch(ENDPOINT, {
        method: "GET",
        headers: { "Accept": "application/json" },
        signal: ctrl.signal,
        credentials: "omit"
      });
      clearTimeout(t);
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();

      // Hash only the dynamic parts to avoid flicker from server timestamps
      const h = hashString(JSON.stringify({
        ticks: data.ticks ?? data.rows ?? [],
        anns:  data.announcements ?? []
      }));

      if (h !== lastHash) {
        render(data);
        lastHash = h;
      }

      backoff = POLL_MS; // reset on success
    } catch (e) {
      $status.textContent = `Fetch error: ${e.message || e}. Retrying in ${(backoff/1000)|0}s…`;
      backoff = Math.min(backoff * 2, 120_000); // cap at 2 minutes
    } finally {
      setTimeout(fetchLatest, backoff);
    }
  }

  fetchLatest(); // initial run

})();
</script>






    <footer>
        <div class="container">

            <div class="footer-bottom">
                <div class="copyright">© 2025 AutoVest Inc. · Privacy Policy · Terms of Use</div>
            </div>
        </div>
    </footer>
    <button class="scrollToTopBtn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <title>arrow-up</title>
            <path d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"></path>
        </svg>
    </button>
    <!-- Swiper JS -->
    <script src="inc/assets/js/swiper-bundle.min.js"></script>
    <!-- Chart js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    <script src="inc/assets/js/ab-particles.min.js"></script>
    <!-- Load WOW.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <!--  scripts - start -->
    <script src="inc/assets/dist/app.js" defer></script>
    <!--  scripts - end -->



</body>

</html>